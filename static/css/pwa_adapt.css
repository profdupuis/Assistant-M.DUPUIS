/* ✅ Adaptations PWA iOS avec +20px de sécurité visuelle */

body.pwa-installed .mobile-action-bar {
  padding-bottom: calc(20px + env(safe-area-inset-bottom, 0px));
  height: calc(100px + env(safe-area-inset-bottom, 0px));
}

body.pwa-installed #conversation {
  padding-bottom: calc(85px + env(safe-area-inset-bottom, 0px));
}

body.pwa-installed .mobile-loader {
  bottom: calc(110px + env(safe-area-inset-bottom, 0px));
}

body.pwa-installed #python-editor {
  bottom: calc(150px + env(safe-area-inset-bottom, 20px)) !important;
  z-index: 3000;
}

/* ✅ Ajustement spécifique pour la PWA sur mobile */
@media screen and (max-width: 768px) {
  body.pwa-installed #python-editor {
    position: fixed;
    bottom: auto !important;
    top: 10vh !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 90vw !important;
    z-index: 3000 !important;
    background: white;
    border-radius: 1rem;
    padding: 1rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
  }

  body.pwa-installed .python-editor-zone .CodeMirror {
    height: 40vh !important;
    min-height: 200px;
  }
}

body.pwa-installed #userInputMobile {
  margin-bottom: calc(35px + env(safe-area-inset-bottom, 0px));
}

body.pwa-installed .scroll-to-bottom-btn {
  bottom: calc(8rem + env(safe-area-inset-bottom, 0px));
}
